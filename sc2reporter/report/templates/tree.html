<!-- {% extends "layout.html" %} -->

<!-- {% block body %} -->

<!DOCTYPE html>
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='content-type'>
    <title>Right-angle phylograms and dendrograms with d3</title>
    <script src="https://d3js.org/d3.v3.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-dispatch@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-selection@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-drag@3"></script>
    <script src="{{url_for('static', filename='newick.js')}}"></script>
    <script src="{{url_for('static', filename='d3.phylogram.js')}}"></script>

    
    <script>
      function load() {
        var newick = Newick.parse('{{ data|safe }}')
        var newickNodes = []
        function buildNewickNodes(node, callback) {
          newickNodes.push(node)
          if (node.branchset) {
            for (var i=0; i < node.branchset.length; i++) {
              buildNewickNodes(node.branchset[i])
            }
          }
        }
        buildNewickNodes(newick)
        
        d3.phylogram.buildRadial('#radialtree', newick, {
          width: 800,
          skipLabels: true
        })
        
        d3.phylogram.build('#phylogram', newick, {
          width: 500,
          height: 500
        });
      }
    </script>
    <style type="text/css" media="screen">
      body { font-family: "Helvetica Neue", Helvetica, sans-serif; }
      td { vertical-align: top; }
    </style>
  </head>
  <body onload="load()">
    <table>
      <tr>
        <td>
          <h2>Circular Dendrogram</h2>
          <div id='radialtree'></div>
        </td>
        <td>
          <h2>Phylogram</h2>
          <div id='phylogram'></div>
        </td>
      </tr>
    </table>
  </body>
</html>








<!-- <style>
  body { 
  font: 14px helvetica neue, helvetica, arial, sans-serif;
}

#cy {
  height: 100%;
  width: 100%;
  position: absolute;
  left: 0;
  top: 4%;
}


</style> 

<div id='cy'></div> 

<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.21.0/cytoscape.min.js"></script>
<script src="https://unpkg.com/layout-base/layout-base.js"></script>
<script src="https://unpkg.com/cose-base/cose-base.js"></script>
<script src="{{url_for('static', filename='cytoscape-cose-bilkent.js')}}"></script>
<script>

data = ({{ data|safe }})
var cy = window.cy = cytoscape({
  container: document.getElementById('cy'),

  boxSelectionEnabled: false,
  autounselectify: true,

  layout: {
    name: 'cose'
  },

  style: [
    {
      selector: 'node',
      style: {
        'height': 20,
        'width': 20,
        'background-color': '#18e018',
        // 'content': "data(id)",
      }
    },

    {
      selector: 'edge',
      style: {
        'curve-style': 'bezier',
        'haystack-radius': 0,
        'width': 5,
        'opacity': 0.5,
        'line-color': 'grey',
        'content': 'data(weight)'
      }
    },
    {
      selector: '.root',
      style: {
        width: 0.01,
        height: 0.01
      }
    },{
    selector: '.leaf',
    style: {
      'background-color':'lightblue'
    }
  }
  ],
  elements: data
});

</script> -->
<!-- {% endblock %} -->